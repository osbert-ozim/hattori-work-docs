{
  "MessageRole": {
    "type": "string",
    "enum": ["user", "assistant"],
    "description": "Role of the message sender"
  },
  "ChatMessage": {
    "type": "object",
    "required": ["role", "content"],
    "properties": {
      "role": {
        "$ref": "#MessageRole",
        "example": "user"
      },
      "content": {
        "type": "string",
        "description": "The message content",
        "example": "Hello, I need help with my project.",
        "minLength": 1,
        "maxLength": 10000
      }
    },
    "additionalProperties": false
  },
  "EnhancedChatMessage": {
    "allOf": [
      {
        "$ref": "#ChatMessage"
      },
      {
        "type": "object",
        "required": ["message_id", "seq_num", "created_at_epoch"],
        "properties": {
          "message_id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for this message",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "seq_num": {
            "type": "integer",
            "description": "Sequence number of the message in the conversation",
            "minimum": 0,
            "example": 42
          },
          "created_at_epoch": {
            "type": "integer",
            "description": "Unix timestamp in seconds when the message was created",
            "example": 1705228445
          }
        },
        "additionalProperties": false
      }
    ]
  }
}

